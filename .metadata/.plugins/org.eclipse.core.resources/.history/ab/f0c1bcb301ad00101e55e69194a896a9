<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="jakarta.tags.core" %>
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABC News - Trang ch·ªß</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center mb-4">üè† ABC News - Trang ch·ªß</h1>
        
        <!-- Debug Info -->
        <div class="alert alert-info">
            <h5>Debug Information:</h5>
            <p><strong>Featured News:</strong> ${featuredNews != null ? featuredNews.size() : 'null'}</p>
            <p><strong>Hot News:</strong> ${hotNews != null ? hotNews.size() : 'null'}</p>
            <p><strong>Latest News:</strong> ${latestNews != null ? latestNews.size() : 'null'}</p>
            <p><strong>Categories:</strong> ${categories != null ? categories.size() : 'null'}</p>
        </div>
        
        <!-- Navigation -->
        <div class="row mb-4">
            <div class="col-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <div class="container-fluid">
                        <a class="navbar-brand" href="${pageContext.request.contextPath}/home">ABC News</a>
                        <div class="navbar-nav">
                            <a class="nav-link" href="${pageContext.request.contextPath}/login">ƒêƒÉng nh·∫≠p</a>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
        
        <!-- Categories -->
        <c:if test="${categories != null && categories.size() > 0}">
            <div class="row mb-4">
                <div class="col-12">
                    <h3>üìÇ Danh m·ª•c</h3>
                    <div class="list-group">
                        <c:forEach var="category" items="${categories}">
                            <a href="${pageContext.request.contextPath}/category/${category.id}" 
                               class="list-group-item list-group-item-action">
                                ${category.name}
                            </a>
                        </c:forEach>
                    </div>
                </div>
            </div>
        </c:if>
        
        <!-- Featured News -->
        <c:if test="${featuredNews != null && featuredNews.size() > 0}">
            <div class="row mb-4">
                <div class="col-12">
                    <h3>‚≠ê Tin n·ªïi b·∫≠t</h3>
                    <div class="row">
                        <c:forEach var="news" items="${featuredNews}">
                            <div class="col-md-6 col-lg-4 mb-3">
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            <a href="${pageContext.request.contextPath}/news/${news.id}" 
                                               class="text-decoration-none">
                                                ${news.title}
                                            </a>
                                        </h5>
                                        <p class="card-text">${news.content.length() > 100 ? news.content.substring(0, 100) + '...' : news.content}</p>
                                        <small class="text-muted">
                                            üëÅÔ∏è ${news.viewCount} | üìÖ ${news.postedDate} | ‚úçÔ∏è ${news.authorName}
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </c:forEach>
                    </div>
                </div>
            </div>
        </c:if>
        
        <!-- Hot News -->
        <c:if test="${hotNews != null && hotNews.size() > 0}">
            <div class="row mb-4">
                <div class="col-12">
                    <h3>üî• Tin hot</h3>
                    <div class="list-group">
                        <c:forEach var="news" items="${hotNews}">
                            <a href="${pageContext.request.contextPath}/news/${news.id}" 
                               class="list-group-item list-group-item-action">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1">${news.title}</h6>
                                    <small>üëÅÔ∏è ${news.viewCount}</small>
                                </div>
                                <small class="text-muted">üìÖ ${news.postedDate} | ‚úçÔ∏è ${news.authorName}</small>
                            </a>
                        </c:forEach>
                    </div>
                </div>
            </div>
        </c:if>
        
        <!-- Latest News -->
        <c:if test="${latestNews != null && latestNews.size() > 0}">
            <div class="row mb-4">
                <div class="col-12">
                    <h3>‚è∞ Tin m·ªõi nh·∫•t</h3>
                    <div class="list-group">
                        <c:forEach var="news" items="${latestNews}">
                            <a href="${pageContext.request.contextPath}/news/${news.id}" 
                               class="list-group-item list-group-item-action">
                                <div class="d-flex w-100 justify-content-between">
                                    <h6 class="mb-1">${news.title}</h6>
                                    <small>üëÅÔ∏è ${news.viewCount}</small>
                                </div>
                                <small class="text-muted">üìÖ ${news.postedDate} | ‚úçÔ∏è ${news.authorName}</small>
                            </a>
                        </c:forEach>
                    </div>
                </div>
            </div>
        </c:if>
        
        <!-- No Data Message -->
        <c:if test="${(featuredNews == null || featuredNews.size() == 0) && 
                      (hotNews == null || hotNews.size() == 0) && 
                      (latestNews == null || latestNews.size() == 0)}">
            <div class="alert alert-warning text-center">
                <h4>üì∞ Ch∆∞a c√≥ tin t·ª©c m·ªõi</h4>
                <p>Hi·ªán t·∫°i ch∆∞a c√≥ tin t·ª©c n√†o ƒë∆∞·ª£c ƒëƒÉng. Vui l√≤ng quay l·∫°i sau!</p>
                <a href="${pageContext.request.contextPath}/login" class="btn btn-primary">
                    ƒêƒÉng nh·∫≠p ƒë·ªÉ qu·∫£n l√Ω tin t·ª©c
                </a>
            </div>
        </c:if>
        
        <!-- Newsletter Signup -->
        <div class="row mt-5">
            <div class="col-md-6 mx-auto">
                <div class="card">
                    <div class="card-body text-center">
                        <h5>üìß ƒêƒÉng k√Ω nh·∫≠n tin</h5>
                        <p>Nh·∫≠n tin t·ª©c m·ªõi nh·∫•t t·ª´ ABC News qua email.</p>
                        <form action="${pageContext.request.contextPath}/newsletter" method="post" class="d-flex">
                            <input type="email" name="email" class="form-control me-2" 
                                   placeholder="Nh·∫≠p email c·ªßa b·∫°n" required>
                            <button type="submit" class="btn btn-success">ƒêƒÉng k√Ω</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>