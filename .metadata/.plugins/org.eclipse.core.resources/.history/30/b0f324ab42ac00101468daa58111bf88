<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
    <%@ taglib uri="jakarta.tags.core" prefix="c" %>
        <%@ taglib uri="jakarta.tags.fmt" prefix="fmt" %>
            <!DOCTYPE html>
            <html>

            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Qu·∫£n tr·ªã h·ªá th·ªëng - ABC News</title>
                <link rel="stylesheet" href="${pageContext.request.contextPath}/assets/css/style.css">
                <link rel="stylesheet" href="${pageContext.request.contextPath}/assets/css/admin.css">
            </head>

            <body>
                <!-- Header -->
                <header class="admin-header">
                    <div class="container">
                        <div class="header-content">
                            <div class="logo">
                                <h1>ABC News - Qu·∫£n tr·ªã</h1>
                            </div>
                            <div class="user-info">
                                <span>Xin ch√†o, ${sessionScope.user.fullname}</span>
                                <a href="${pageContext.request.contextPath}/" class="btn-home" target="_blank">
                                    <i class="fas fa-home"></i> Trang ch·ªß ƒë·ªçc gi·∫£
                                </a>
                                <a href="${pageContext.request.contextPath}/logout" class="btn-logout">ƒêƒÉng xu·∫•t</a>
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Admin Navigation -->
                <nav class="admin-nav">
                    <div class="container">
                        <ul class="admin-menu">
                            <li><a href="${pageContext.request.contextPath}/admin" class="active">Trang ch·ªß</a></li>
                            <li><a href="${pageContext.request.contextPath}/admin/news">Qu·∫£n l√Ω tin t·ª©c</a></li>
                            <li><a href="${pageContext.request.contextPath}/admin/categories">Qu·∫£n l√Ω lo·∫°i tin</a></li>
                            <li><a href="${pageContext.request.contextPath}/admin/users">Qu·∫£n l√Ω ng∆∞·ªùi d√πng</a></li>
                            <li><a href="${pageContext.request.contextPath}/admin/newsletters">Qu·∫£n l√Ω Newsletter</a>
                            </li>
                        </ul>
                    </div>
                </nav>

                <!-- Main Content -->
                <main class="admin-content">
                    <div class="container">
                        <div class="dashboard">
                            <h2>B·∫£ng ƒëi·ªÅu khi·ªÉn</h2>

                            <!-- Statistics Cards -->
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-icon">üì∞</div>
                                    <div class="stat-info">
                                        <h3>${totalNews}</h3>
                                        <p>T·ªïng s·ªë tin t·ª©c</p>
                                    </div>
                                </div>

                                <div class="stat-card">
                                    <div class="stat-icon">üìÇ</div>
                                    <div class="stat-info">
                                        <h3>${totalCategories}</h3>
                                        <p>Lo·∫°i tin</p>
                                    </div>
                                </div>

                                <div class="stat-card">
                                    <div class="stat-icon">üë•</div>
                                    <div class="stat-info">
                                        <h3>${totalUsers}</h3>
                                        <p>Ng∆∞·ªùi d√πng</p>
                                    </div>
                                </div>

                                <div class="stat-card">
                                    <div class="stat-icon">üìß</div>
                                    <div class="stat-info">
                                        <h3>${totalNewsletters}</h3>
                                        <p>ƒêƒÉng k√Ω newsletter</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Recent Activities -->
                            <div class="recent-activities">
                                <div class="activity-section">
                                    <h3>Tin t·ª©c m·ªõi nh·∫•t</h3>
                                    <div class="activity-list">
                                        <c:forEach var="news" items="${recentNews}">
                                            <div class="activity-item">
                                                <div class="activity-content">
                                                    <h4><a
                                                            href="${pageContext.request.contextPath}/admin/news/edit?id=${news.id}">${news.title}</a>
                                                    </h4>
                                                    <p>T√°c gi·∫£: ${news.authorName} -
                                                        <fmt:formatDate value="${news.postedDate}"
                                                            pattern="dd/MM/yyyy" />
                                                    </p>
                                                </div>
                                                <div class="activity-actions">
                                                    <a href="${pageContext.request.contextPath}/admin/news/edit?id=${news.id}"
                                                        class="btn-edit">S·ª≠a</a>
                                                    <a href="${pageContext.request.contextPath}/admin/news/delete?id=${news.id}"
                                                        class="btn-delete"
                                                        onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a?')">X√≥a</a>
                                                </div>
                                            </div>
                                        </c:forEach>
                                    </div>
                                </div>

                                <div class="activity-section">
                                    <h3>Ng∆∞·ªùi d√πng m·ªõi</h3>
                                    <div class="activity-list">
                                        <c:forEach var="user" items="${recentUsers}">
                                            <div class="activity-item">
                                                <div class="activity-content">
                                                    <h4>${user.fullname}</h4>
                                                    <p>
                                                        <c:choose>
                                                            <c:when test="${user.role == 1}">Qu·∫£n tr·ªã vi√™n</c:when>
                                                            <c:otherwise>Ph√≥ng vi√™n</c:otherwise>
                                                        </c:choose>
                                                        - ${user.email}
                                                    </p>
                                                </div>
                                                <div class="activity-actions">
                                                    <a href="${pageContext.request.contextPath}/admin/users/edit?id=${user.id}"
                                                        class="btn-edit">S·ª≠a</a>
                                                </div>
                                            </div>
                                        </c:forEach>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick Actions -->
                            <div class="quick-actions">
                                <h3>Thao t√°c nhanh</h3>
                                <div class="action-buttons">
                                    <a href="${pageContext.request.contextPath}/admin/news/add" class="btn-action">
                                        <i class="icon">‚ûï</i>
                                        <span>Th√™m tin t·ª©c m·ªõi</span>
                                    </a>
                                    <a href="${pageContext.request.contextPath}/admin/categories/add"
                                        class="btn-action">
                                        <i class="icon">üìÇ</i>
                                        <span>Th√™m lo·∫°i tin</span>
                                    </a>
                                    <a href="${pageContext.request.contextPath}/admin/users/add" class="btn-action">
                                        <i class="icon">üë§</i>
                                        <span>Th√™m ng∆∞·ªùi d√πng</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>

                <!-- Footer -->
                <footer class="admin-footer">
                    <div class="container">
                        <p>&copy; 2024 ABC News Admin Panel. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
                    </div>
                </footer>
            </body>

            </html>